{% extends 'base.html' %} {% load static %} {% block title %} Home {% endblock title %} {% block head %}
<link rel="stylesheet" href="{%  static  'css/home.css'  %}" />
{% endblock head %} {% block body %}
<section class="home_section relative">
  <div class="w-[100vw] h-[100vh] overflow-clip home_bg">

  </div>
  <div class="absolute top-0 left-0 w-[100vw] h-[100vh]  bg-[#11111d8c] img-overlay"></div>
  <div class="absolute  w-[100vw] h-[100vh] top-0 flex justify-center items-stretch ">
    <div class="w-full p-[15vw] text-white z-50 text-5xl flex flex-col justify-center items-start ">

      <p class=" font-extralight">The</p>
      <p class="font-black">Most Preferred</p>
      <p class=" font-extralight">private self-financing</p>
      <p class=" font-extralight">Engineering college</p>
    </div>
  </div>
</section>


<div class="absolute bottom-3 animate-bounce w w-full flex items-center justify-center">
  <img src="{%  static  'images/chevrons-down.svg'  %}" alt="chevrons-down" class="" />
  <i class="fa-duotone fa-chevrons-down"></i>
</div>

<section class="w-[100vw] h-[10vh] flex justify-center items-center ">
  <div class="w-[80%]">
    <div class="flex items-center justify-between">
      <h1 class="font-black text-4xl">Happenings</h1>
      <a href="/gallery" class="bg-[#007FFF] p-2 pl-4 pr-4 rounded-md font-bold text-white">Explore More</a>
    </div>

  </div>
</section>

<section class="w-[100vw] h-[30vh] bg-[#F9F9F9] flex items-center justify-center " id="counterSection">
  <div class="w-[80%] flex items-center justify-between">
    <div class="flex-col justify-center flex items-center">
      <h1 class="text-5xl font-black" id="students_counter">0</h1>
      <p class="text-xl text-[#007FFF]">STUDENTS</p>
    </div>
    <div class="flex-col justify-center flex items-center">
      <h1 class="text-5xl font-black" id="faculty_counter">0</h1>
      <p class="text-xl text-[#007FFF]"> FACULTY</p>
    </div>
    <div class="flex-col justify-center flex items-center">
      <h1 class="text-5xl font-black" id="staff_counter">0</h1>
      <p class="text-xl text-[#007FFF]"> STAFFS</p>
    </div>

  </div>
</section>






{% endblock body %}

{% block script %}

<script>
  const topbar = document.querySelector('.topbar');
  const img_overlay = document.querySelector('.img-overlay');
  img_overlay.style.bottom = topbar.getBoundingClientRect().height + "px";
  const counterSection = document.getElementById('counterSection');
  const counterStudents = document.getElementById('students_counter');
  const counterFaculty = document.getElementById('faculty_counter');
  const counterStaff = document.getElementById('staff_counter');


  function getOffset(el) {
    const rect = el.getBoundingClientRect();
    console.log(rect.height);
    return {
      height: rect.height,
      left: rect.left + window.scrollX,
      top: rect.top + window.scrollY
    };
  }

  window.addEventListener('scroll', () => {
    console.log();
    if ((window.scrollY + getOffset(counterSection).height) >= getOffset(counterSection).top) {
      increment(counterStudents, 1000, 10)
      increment(counterFaculty, 70, 200)
      increment(counterStaff, 60, 500)

    }
  })
  console.log(getOffset(counterSection).top, counterSection.offsetHeight);


  function increment(element, finalValue, time) {
    const count = parseInt(element.innerHTML);
    if (count < finalValue) {
      element.innerHTML = count + 1 + "+";
      setTimeout(() => {
        increment(element, finalValue);
      }, time);
    }
    else if (count > finalValue) {
      element.innerHTML = finalValue + "+";
    }
  }



</script>
{% endblock script %}